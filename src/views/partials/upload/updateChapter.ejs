
<form id="form6" style="display: none;">
    <div class="d-flex justify-content-center rounded-2 section-title" style="margin-bottom: 20px;">
        <span><i class="fa-solid fa-book-open"></i>  THÔNG TIN TẬP</span>
    </div>

    <!-- Tên sách -->
    <div class="row mb-3 me-3">
        <div class="col-md-2 text-end align-self-md-center">
            <b>Tên sách <span style="color: red;">*</span></b>
        </div>
        <div class="col-md-10">
            <input type="text" class="form-control" placeholder="Tên sách" name="title" disabled>
        </div>
    </div>

    <!-- Tác giả -->
    <div class="row mb-3 me-3">
        <div class="col-md-2 text-end align-self-md-center">
            <b>Tác giả <span style="color: red;">*</span></b>
        </div>
        <div class="col-md-10">
            <input type="text" class="form-control" placeholder="Tên tác giả" name="author" disabled>
        </div>
    </div>

    <!-- Tên tập -->
    <div class="row mb-3 me-3">
        <div class="col-md-2 text-end align-self-md-center">
            <b>Tên tập <span style="color: red;">*</span></b>
        </div>
        <div class="col-md-10">
            <input type="text" class="form-control" placeholder="Tên tập" name="volName" disabled>
        </div>
    </div>

    <!-- Tên chương -->
    <div class="row mb-3 me-3">
        <div class="col-md-2 text-end align-self-md-center">
            <b>Tên chương <span style="color: red;">*</span></b>
        </div>
        <div class="col-md-10">
            <input type="text" class="form-control" placeholder="Tên chương" name="chapName">
        </div>
    </div>

    <!-- Nội dung chương -->
    <div class="row mb-3 me-3">
        <div class="col-md-2 text-end mt-2">
            <b>Nội dung <span style="color: red;">*</span></b>
        </div>
        <div class="col-md-10">
            <textarea id="content" name="content">Welcome to HappiNovel!</textarea>
            <script>
                tinymce.init({
                    selector: 'textarea#content'
                });
            </script>            
        </div>
    </div>

    <div class="row mb-3 float-end me-5">
        <button type="button" class="btn btn-success">Thêm chương</button>
    </div>

        
</form>
<script>
    const chapList = document.querySelectorAll(".bg-chap")
    for (let i = 0; i < chapList.length; i++) {
        const chap = chapList[i]
        chap.addEventListener('click', async function(e) {
            chapID = chap.attributes[2].nodeValue
            const postName = "form6"
            try {
                const res = await fetch('/upload', {
                    method: 'post',
                    body: JSON.stringify({postName, chapID}),
                    headers: {'Content-Type': 'application/json'}
                });
                let data = await res.json()
                // console.log(data)
                let bookData = data.book[0]
                let volData = data.vol[0]
                let chapData = data.chap
                form6.querySelector('[name="title"]').setAttribute("value", bookData.title)
                form6.querySelector('[name="author"]').setAttribute("value", bookData.authorName)
                form6.querySelector('[name="volName"]').setAttribute("value", volData.volName)
                form6.querySelector('[name="chapName"]').setAttribute("value", chapData.chapName)
                showContent("form6")
            }
            catch (err) {
                console.log(err)
            }
        })
    }
</script>
